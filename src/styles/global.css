@import "tailwindcss";

/* Design tokens */
:root {
  --color-heading: #0c2b33; /* deep teal-blue for headings */
  --color-bg: #f5f7f8; /* warm light grey background */
  --color-surface: #ffffff;
  --color-text: #1a3942; /* dark teal-grey for text */
  --color-text-muted: #5a7d87; /* muted teal-grey */
  --color-border: #c5d5db; /* soft teal-grey border */
  --color-accent: #008080; /* primary teal */
  --color-accent-hover: #006666; /* darker teal on hover */
  --color-accent-secondary: #215D6E; /* teal-blue accent */
  --shadow-elev: 0 2px 4px -2px rgba(1, 77, 78, 0.12),
    0 4px 12px -2px rgba(1, 77, 78, 0.08);
  --nav-height: 64px;
}

html.theme-dark {
  --color-heading: #e6f4f4; /* light teal-tinted white */
  --color-bg: #0a1e24; /* deep dark teal-blue */
  --color-surface: #13292f; /* dark teal surface */
  --color-text: #d4e8e8;
  --color-text-muted: #82a5a8; /* muted teal */
  --color-border: #1e3940;
  --color-accent: #00c9c9; /* bright teal for dark mode */
  --color-accent-hover: #00e6e6; /* brighter teal on hover */
  --color-accent-secondary: #367588; /* lighter teal-blue */
  --shadow-elev: 0 2px 6px -2px rgba(0, 120, 120, 0.35),
    0 4px 18px -4px rgba(0, 120, 120, 0.25);
}

body {
  background: var(--color-bg);
  color: var(--color-text);
  transition: background-color 0.35s ease, color 0.35s ease;
}

html {
  scroll-behavior: smooth;
}
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

@layer components {
  /* Navbar */
  .navbar {
    @apply fixed top-0 left-0 w-full z-40 flex items-center px-4 sm:px-6 py-2 backdrop-blur-sm;
    background: linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.75),
      rgba(255, 255, 255, 0.6)
    );
    backdrop-filter: blur(14px) saturate(1.2);
    border-bottom: 1px solid var(--color-border);
    box-shadow: var(--shadow-elev);
    gap: 1rem;
    height: var(--nav-height);
  }

  @media (min-width: 640px) {
    .navbar {
      gap: 1.5rem;
    }
  }
  html.theme-dark .navbar {
    background: linear-gradient(
      to bottom,
      rgba(22, 27, 34, 0.85),
      rgba(22, 27, 34, 0.7)
    );
    backdrop-filter: blur(16px) saturate(1.3);
  }

  .nav-list {
    @apply flex gap-1 sm:gap-3 flex-nowrap list-none px-0 m-0 items-center;
    position: relative;
    order: -1;
  }

  /* Hamburger menu button */
  .nav-toggle {
    @apply relative w-8 h-8 flex flex-col justify-center items-center gap-1.5 bg-transparent border-none cursor-pointer p-0 sm:hidden;
    color: var(--color-text-muted);
    transition: color 0.3s ease;
  }

  .nav-toggle:hover,
  .nav-toggle:focus {
    color: var(--color-heading);
  }

  .nav-toggle:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
  }

  .hamburger-line {
    @apply block w-6 h-0.5 bg-current transition-all duration-300 ease-in-out;
  }

  /* Brand styling */
  .nav-brand {
    @apply flex items-center shrink-0 gap-2 sm:gap-3 ml-auto;
  }

  /* Hamburger animation when menu is open */
  .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(1) {
    transform: rotate(45deg) translate(8px, 8px);
  }

  .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(2) {
    opacity: 0;
  }

  .nav-toggle[aria-expanded="true"] .hamburger-line:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
  }

  /* Mobile nav menu dropdown */
  @media (max-width: 640px) {
    .nav-list {
      @apply absolute top-full left-0 right-0 flex-col gap-0 bg-transparent backdrop-blur-sm;
      background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.95),
        rgba(255, 255, 255, 0.9)
      );
      border-bottom: 1px solid var(--color-border);
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      padding: 0;
      margin-top: 0;
      z-index: 50;
    }

    html.theme-dark .nav-list {
      background: linear-gradient(
        to bottom,
        rgba(22, 27, 34, 0.95),
        rgba(22, 27, 34, 0.9)
      );
    }

    .nav-list.nav-menu-open {
      max-height: 300px;
      padding: 0.5rem 0;
    }

    .nav-list li {
      @apply w-full;
    }

    .nav-list .nav-link {
      @apply block w-full px-4 py-2 rounded-none;
      border-radius: 0;
    }

    .nav-list .nav-link:hover {
      background: color-mix(
        in srgb,
        var(--color-accent) 8%,
        var(--color-surface)
      );
    }
  }

  .nav-link {
    @apply no-underline transition-colors duration-200 ease-in-out text-sm font-medium px-2 sm:px-3 py-1.5 relative;
    border-radius: 0.75rem;
    color: var(--color-text-muted);
    line-height: 1.25rem;
    letter-spacing: 0.02em;
  }
  .nav-link.is-active {
    background: color-mix(
      in srgb,
      var(--color-accent) 12%,
      var(--color-surface)
    );
    color: var(--color-heading);
    box-shadow: 0 0 0 1px var(--color-border) inset;
  }
  .nav-link:hover {
    color: var(--color-accent);
  }
  .nav-link:active {
    transform: translateY(1px);
  }

  .theme-toggle-btn {
    @apply inline-flex items-center justify-center text-sm font-medium select-none relative;
    border: 1px solid var(--color-border);
    background: transparent;
    padding: 0;
    height: 34px;
    width: 70px;
    border-radius: 1rem;
    cursor: pointer;
    transition: border-color 0.3s ease, background-color 0.3s ease;
    overflow: hidden;
  }

  @media (max-width: 500px) {
    .theme-toggle-btn {
      height: 30px;
      width: 52px;
    }

    .theme-toggle-btn .slider-thumb {
      width: 22px !important;
      height: 22px !important;
      top: 2px !important;
      left: 2px !important;
    }

    .theme-toggle-btn svg {
      width: 12px !important;
      height: 12px !important;
    }

    html.theme-dark .theme-toggle-btn .slider-thumb {
      transform: translateX(22px) !important;
    }
  }
  .theme-toggle-btn .slider-track {
    position: relative;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: inherit;
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-surface) 92%, var(--color-bg)),
      color-mix(in srgb, var(--color-surface) 86%, var(--color-bg))
    );
    box-shadow: inset 0 0 0 1px var(--color-border);
  }
  .theme-toggle-btn .slider-thumb {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--color-surface);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--color-text);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15), 0 0 0 1px var(--color-border);
    transition: transform 0.4s cubic-bezier(0.65, 0.05, 0.36, 1),
      background-color 0.3s, color 0.3s;
  }

  .theme-toggle-btn[data-mode="auto"] .slider-thumb {
    background: linear-gradient(
      135deg,
      var(--color-surface) 55%,
      color-mix(in srgb, var(--color-accent) 22%, var(--color-surface)) 100%
    );
    justify-content: center;
  }
  html.theme-dark .theme-toggle-btn .slider-thumb {
    transform: translateX(36px);
  }
  .theme-toggle-btn svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
  }
  /* Icon visibility rules */
  .theme-toggle-btn .icon-light {
    display: inline;
  }
  .theme-toggle-btn .icon-dark,
  .theme-toggle-btn .icon-auto {
    display: none;
  }
  html.theme-dark .theme-toggle-btn .icon-light {
    display: none;
  }
  html.theme-dark .theme-toggle-btn .icon-dark {
    display: inline;
  }
  .theme-toggle-btn[data-mode="auto"] .icon-light,
  .theme-toggle-btn[data-mode="auto"] .icon-dark {
    display: none;
  }
  .theme-toggle-btn[data-mode="auto"] .icon-auto {
    display: inline;
    opacity: 0.9;
  }
  .theme-toggle-btn:hover,
  .theme-toggle-btn:focus-visible {
    border-color: var(--color-accent);
    color: var(--color-accent);
  }
  .theme-toggle-btn:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 3px;
  }
  .theme-toggle-btn:active {
    transform: translateY(1px);
  }
  html.theme-dark .theme-toggle-btn {
    box-shadow: 0 0 0 1px var(--color-border);
  }

  /* Hero section */
  .hero-section {
    @apply flex flex-col md:flex-row items-center gap-12 justify-center px-4 sm:px-6 lg:px-8 py-16 shadow-lg mx-auto w-full max-w-6xl;
    border-radius: 1.5rem;
    margin: 5rem auto 0;
    background: linear-gradient(
      to right,
      rgba(0, 128, 128, 0.08) 0%,
      rgba(0, 128, 128, 0.03) 60%,
      rgba(0, 128, 128, 0) 100%
    );
  }

  html.theme-dark .hero-section {
    background: linear-gradient(
      to right,
      rgba(0, 201, 201, 0.08) 0%,
      rgba(0, 201, 201, 0.02) 60%,
      rgba(0, 201, 201, 0) 100%
    );
  }

  .hero-image-container-left {
    @apply shrink-0 order-first;
  }

  .hero-content {
    @apply flex-1 text-left;
  }

  .hero-title {
    @apply text-4xl font-bold; /* rely on CSS variable */
    color: var(--color-heading);
  }

  .hero-description {
    @apply mb-6;
    color: var(--color-text-muted);
  }

  .hero-button-base {
    @apply inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-medium rounded-md transition-colors;
  }

  /* Minimalist button style */
  .hero-button-minimal {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium transition-colors duration-200;
    border-radius: 0.875rem;
    border: 1px solid #c5d5db;
    color: #1a3942;
  }
  
  .hero-button-minimal:hover {
    border-color: #008080;
    color: #006666;
    background: rgba(0, 128, 128, 0.05);
  }
  
  html.theme-dark .hero-button-minimal {
    border-color: #1e3940;
    color: #d4e8e8;
  }
  
  html.theme-dark .hero-button-minimal:hover {
    border-color: #00c9c9;
    color: #00e6e6;
    background: rgba(0, 201, 201, 0.1);
  }

  /* Minimalist icon-only button style */
  .hero-icon-button {
    @apply inline-flex items-center justify-center w-14 h-14 rounded-full transition-all duration-200;
    @apply hover:scale-110;
  }

  .hero-icon-email {
    color: #0c2b33;
    background-color: #b3e0e0;
    @apply hover:bg-teal-300 dark:bg-teal-900 dark:text-teal-100 dark:hover:bg-teal-800;
  }

  .hero-icon-resume {
    color: #014d4e;
    background-color: #80d4d4;
    @apply hover:bg-teal-400 dark:bg-teal-800 dark:text-teal-100 dark:hover:bg-teal-700;
  }

  .hero-icon-github {
    color: #ffffff;
    background-color: #13292f;
    @apply hover:bg-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700;
  }

  .hero-icon-linkedin {
    color: #0c2b33;
    background-color: #b3e0e0;
    @apply hover:bg-teal-300 dark:bg-teal-900 dark:text-teal-100 dark:hover:bg-teal-800;
  }

  .hero-image-container {
    @apply flex justify-center;
  }

  .hero-image {
    @apply rounded-full w-48 h-48 object-cover shadow-lg min-w-[200px];
  }

  /* Projects section */
  .projects-section {
    @apply w-full mx-auto px-3 sm:px-6 lg:px-8 py-12;
    background: var(--color-bg);
    /* Anchor offset ensures nav does not cover heading */
    scroll-margin-top: calc(var(--nav-height) + 1.5rem);
  }

  .projects-title {
    @apply text-center text-4xl font-bold mb-12;
    color: var(--color-heading);
  }

  .projects-grid {
    @apply flex flex-col gap-8 sm:gap-20 mx-auto w-full max-w-6xl;
  }

  .project-row {
    @apply flex items-stretch flex-col sm:flex-row gap-8 sm:gap-12 w-full py-8 sm:py-10 shadow-lg;
    border-radius: 1.5rem;
    background: linear-gradient(
      to right,
      rgba(0, 128, 128, 0.08) 0%,
      rgba(0, 128, 128, 0.03) 60%,
      rgba(0, 128, 128, 0) 100%
    );
  }

  html.theme-dark .project-row {
    background: linear-gradient(
      to right,
      rgba(0, 201, 201, 0.08) 0%,
      rgba(0, 201, 201, 0.02) 60%,
      rgba(0, 201, 201, 0) 100%
    );
  }

  .project-row:last-child {
    padding-bottom: 0;
  }

  .resume-gradient {
    background: linear-gradient(
      to right,
      rgba(0, 128, 128, 0.08) 0%,
      rgba(0, 128, 128, 0.03) 60%,
      rgba(0, 128, 128, 0) 100%
    ) !important;
  }

  html.theme-dark .resume-gradient {
    background: linear-gradient(
      to right,
      rgba(0, 201, 201, 0.08) 0%,
      rgba(0, 201, 201, 0.02) 60%,
      rgba(0, 201, 201, 0) 100%
    ) !important;
  }

  .skill-card {
    background: linear-gradient(
      135deg,
      rgba(0, 128, 128, 0.15) 0%,
      rgba(0, 128, 128, 0.08) 100%
    );
  }

  html.theme-dark .skill-card {
    background: linear-gradient(
      135deg,
      rgba(0, 201, 201, 0.12) 0%,
      rgba(0, 201, 201, 0.05) 100%
    );
  }

  .project-image-container {
    @apply w-full sm:w-5/12 shrink-0 overflow-hidden order-1 sm:order-1 bg-gray-100 h-64 sm:h-80;
    box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.2);
  }

  html.theme-dark .project-image-container {
    @apply bg-gray-900;
    box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.5);
  }

  .project-image-container.image-right {
    @apply sm:order-2;
  }

  .project-image {
    @apply w-full h-full object-contain transition-transform duration-300;
    border-radius: 1.25rem;
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
  }

  html.theme-dark .project-image {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
  }

  .light-image {
    display: block;
  }

  .dark-image {
    display: none;
  }

  html.theme-dark .light-image {
    display: none;
  }

  html.theme-dark .dark-image {
    display: block;
  }

  .project-image:hover {
    @apply scale-105;
  }

  .github-placeholder {
    @apply w-full h-full flex flex-col items-center justify-center gap-4;
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
    color: var(--color-text-muted);
  }

  html.theme-dark .github-placeholder {
    background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
    color: var(--color-text-muted);
  }

  .github-icon {
    @apply w-20 h-20 opacity-60;
    color: var(--color-accent);
  }

  .image-placeholder {
    @apply w-full h-full bg-linear-to-br from-gray-200 to-gray-300 flex items-center justify-center;
  }

  html.theme-dark .image-placeholder {
    @apply from-gray-800 to-gray-900;
  }

  .project-card {
    @apply px-4 py-4 sm:p-10 transition-all duration-300 h-fit flex-1 order-2 sm:order-0 flex flex-col justify-between;
    background: transparent;
    border: none;
    box-shadow: none;
    border-radius: 0;
  }

  .project-card:hover {
    border-color: transparent;
  }

  .project-card.order-right {
    @apply sm:order-1;
  }

  .project-content {
    @apply flex flex-col gap-6;
  }

  .project-title {
    @apply text-2xl sm:text-3xl font-bold;
    color: var(--color-heading);
  }

  .project-description {
    @apply text-base sm:text-lg;
    color: var(--color-text-muted);
  }

  .project-buttons {
    @apply flex gap-3 mt-6;
  }

  .project-button-primary {
    @apply inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-medium text-white transition-colors;
    background-color: #008080;
    border-radius: 0.875rem;
  }
  
  .project-button-primary:hover {
    background-color: #006666;
  }

  .project-button-secondary {
    @apply inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-gray-200 hover:bg-gray-300 transition-colors;
    border-radius: 0.875rem;
  }

  .project-button-tiertiary {
    @apply inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-medium text-white bg-gray-800 hover:bg-gray-900 transition-colors;
    border-radius: 0.875rem;
  }

  .project-divider {
    @apply border-t border-gray-200 hidden;
  }

  .project-languages {
    @apply flex flex-wrap gap-3 mt-6;
  }

  .language-tag {
    @apply px-2 py-0.5 min-w-20 flex items-center;
    border-radius: 0.75rem;
    background: color-mix(
      in srgb,
      var(--color-surface) 78%,
      var(--color-accent)
    );
    border: 1px solid var(--color-border);
  }

  .language-name {
    @apply text-sm font-medium p-0.5;
    color: var(--color-text);
  }

  .language-percentage {
    @apply text-sm;
    color: var(--color-text-muted);
  }

  .project-footer {
    @apply mt-auto pt-3 flex justify-between items-center text-sm;
    color: var(--color-text-muted);
  }

  .update-time {
    @apply italic ml-4;
  }

  /* Footer */
  .site-footer {
    color: var(--color-text-muted);
    background: transparent;
  }

  /* Dark theme component overrides */
  html.theme-dark .project-button-secondary {
    background: #2d333b;
    color: var(--color-text);
  }
  html.theme-dark .project-button-tiertiary {
    background: #30363d;
  }
  .nav-link:focus-visible,
  .nav-link:hover {
    text-decoration: none;
  }
  .nav-link:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
    color: var(--color-accent);
  }

  /* Fallback offset for browsers lacking scroll-margin-top */
  .projects-section:target::before {
    content: "";
    display: block;
    height: var(--nav-height);
    margin-top: calc(-1 * var(--nav-height));
    pointer-events: none;
  }

  /* Mobile responsive styles for resume */
  @media (max-width: 640px) {
    /* Resume container adjustments */
    #resume {
      padding-left: 0.75rem !important;
      padding-right: 0.75rem !important;
      padding-top: 1rem !important;
      padding-bottom: 1rem !important;
    }

    .resume-content {
      padding: 1rem !important;
      gap: 1rem !important;
    }

    .resume-content h1 {
      line-height: 1.2 !important;
      margin-bottom: 0.5rem !important;
    }

    .resume-content p {
      margin-bottom: 0.75rem !important;
    }

    .resume-contact-info {
      gap: 0.25rem !important;
      flex-basis: 100%;
    }

    .resume-contact-info a {
      display: inline;
    }

    .resume-contact-info > div {
      width: 100%;
    }

    .skills-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 8px !important;
    }

    .skill-category {
      padding: 6px !important;
      padding-left: 8px !important;
    }

    .skill-category-title {
      font-size: 11px !important;
      margin-bottom: 4px !important;
    }

    .skill-keywords {
      font-size: 9px !important;
    }
  }

  @media (max-width: 480px) {
    .skills-grid {
      grid-template-columns: 1fr !important;
    }

    .skill-category {
      padding: 5px !important;
      padding-left: 6px !important;
    }

    .skill-category-title {
      font-size: 10px !important;
      margin-bottom: 3px !important;
    }

    .skill-keywords {
      font-size: 8px !important;
      line-height: 1.3 !important;
    }
  }
}
